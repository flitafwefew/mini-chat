# 批量用户注册脚本

这个脚本可以批量注册多个用户，并自动为他们建立好友关系和创建群聊。

## 功能特性

- ✅ 批量注册15个测试用户
- ✅ 自动建立用户之间的好友关系（双向）
- ✅ 创建群聊并将所有用户添加到群聊中
- ✅ 详细的执行日志和错误处理
- ✅ 统计注册成功率和结果汇总

## 使用方法

### 1. 确保后端服务运行

首先确保后端服务已经启动：

```bash
cd mini-chat-backend
npm start
# 或者
node server.js
```

### 2. 运行批量注册脚本

```bash
# 直接运行主脚本
node batch_register_users.js

# 或者运行测试脚本
node test_batch_register.js
```

## 注册的用户信息

脚本会注册以下15个用户：

| 序号 | 账号 | 姓名 | 邮箱 | 手机号 | 密码 |
|------|------|------|------|--------|------|
| 1 | user001 | 张三 | zhangsan@example.com | 13800138001 | 123456 |
| 2 | user002 | 李四 | lisi@example.com | 13800138002 | 123456 |
| 3 | user003 | 王五 | wangwu@example.com | 13800138003 | 123456 |
| 4 | user004 | 赵六 | zhaoliu@example.com | 13800138004 | 123456 |
| 5 | user005 | 钱七 | qianqi@example.com | 13800138005 | 123456 |
| 6 | user006 | 孙八 | sunba@example.com | 13800138006 | 123456 |
| 7 | user007 | 周九 | zhoujiu@example.com | 13800138007 | 123456 |
| 8 | user008 | 吴十 | wushi@example.com | 13800138008 | 123456 |
| 9 | user009 | 郑十一 | zhengshiyi@example.com | 13800138009 | 123456 |
| 10 | user010 | 王十二 | wangshier@example.com | 13800138010 | 123456 |
| 11 | user011 | 刘十三 | liushisan@example.com | 13800138011 | 123456 |
| 12 | user012 | 陈十四 | chenshisi@example.com | 13800138012 | 123456 |
| 13 | user013 | 杨十五 | yangshiwu@example.com | 13800138013 | 123456 |
| 14 | user014 | 黄十六 | huangshiliu@example.com | 13800138014 | 123456 |
| 15 | user015 | 林十七 | linshiqi@example.com | 13800138015 | 123456 |

## 脚本执行流程

1. **检查服务器状态** - 验证后端服务是否正常运行
2. **批量注册用户** - 逐个注册所有用户
3. **建立好友关系** - 为每对用户建立双向好友关系
4. **创建群聊** - 创建"测试群聊"并将所有用户添加为成员
5. **输出结果统计** - 显示注册成功率和详细信息

## 输出示例

```
🚀 开始批量注册用户...

📝 正在注册第 1/15 个用户: 张三 (user001)
✅ 用户 张三 注册成功!
   - 用户ID: user_1234567890
   - 账号: user001
   - 邮箱: zhangsan@example.com

🤝 开始建立好友关系...

🔗 建立好友关系: 张三 ↔ 李四
✅ 张三 和 李四 成为好友!

👥 开始创建群聊...

🏗️ 群主: 张三 (user001)
👥 群成员数量: 15 人
✅ 群聊创建成功!
   - 群ID: group_1234567890
   - 群名称: 测试群聊
   - 成员数量: 15

📊 批量注册结果总结:
总用户数: 15
成功注册: 15
注册失败: 0
成功率: 100.0%
```

## 测试登录

注册完成后，您可以使用以下任意账号登录测试：

- 账号: `user001`, 密码: `123456`
- 账号: `user002`, 密码: `123456`
- 账号: `user003`, 密码: `123456`
- ... (以此类推)

## 注意事项

1. 确保后端服务在 `http://localhost:3002` 运行
2. 确保数据库连接正常
3. 如果用户已存在，注册会失败但不会影响其他用户
4. 好友关系和群聊创建依赖于用户注册成功

## 故障排除

### 服务器连接失败
```
❌ 服务器未运行或无法连接
请确保后端服务已启动 (运行: npm start 或 node server.js)
```
**解决方案**: 启动后端服务

### 用户已存在
```
❌ 用户 张三 注册失败: 用户已存在
```
**解决方案**: 这是正常情况，脚本会继续注册其他用户

### 数据库连接失败
```
❌ 数据库连接失败
```
**解决方案**: 检查数据库配置和连接状态

